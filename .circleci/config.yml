version: 2.1
general:
  branches:
    only:
      - main
jobs:
  build:
    docker:
      - image: cimg/python:3.8
     

    working_directory: ~/tip_calculator
    
    steps:
      #1 Obtain repo from github 
      - checkout
      #2 Create virtual environment and install dependencies -
      - run: 
          name: Triggering the build
          command: |
           python3 -m pip install --upgrade pip
           python3 -m venv venv
           . venv/bin/activate
           venv/bin/pip3 install -U pip setuptools virtualenv  
           venv/bin/pip3 install -r requirements.txt
           venv/bin/pip3 install -U wheel
      #3 Run coding coversion software plus tester - 
      - run: 
          name: Deploy & Run
          command: | 
           . venv/bin/activate
           python3 ~/tip_calculator/tip_calculator.py 200 20
